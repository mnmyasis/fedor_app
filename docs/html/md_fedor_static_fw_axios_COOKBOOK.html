<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>fedor: Cookbook</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">fedor
   &#160;<span id="projectnumber">0.1</span>
   </div>
   <div id="projectbrief">Стыковщик фарма</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Cookbook </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>This cookbook contains recipes for some commonly requested features.</p>
<p>In order to keep axios as lightweight as possible, it is often necessary to say no to feature requests. Many of these use cases can be supported by augmenting axios with other libraries.</p>
<h2><a class="anchor" id="autotoc_md61"></a>
Promise.prototype.done</h2>
<div class="fragment"><div class="line">$ npm install axios promise --save</div>
</div><!-- fragment --><div class="fragment"><div class="line">const axios = require(&#39;axios&#39;);</div>
<div class="line">require(&#39;promise/polyfill-done&#39;);</div>
<div class="line"> </div>
<div class="line">axios</div>
<div class="line">  .get(&#39;http://www.example.com/user&#39;)</div>
<div class="line">  .then((response) =&gt; {</div>
<div class="line">    console.log(response.data);</div>
<div class="line">    return response;</div>
<div class="line">  })</div>
<div class="line">  .done();</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md62"></a>
Promise.prototype.finally</h2>
<div class="fragment"><div class="line">$ npm install axios promise.prototype.finally --save</div>
</div><!-- fragment --><div class="fragment"><div class="line">const axios = require(&#39;axios&#39;);</div>
<div class="line">require(&#39;promise.prototype.finally&#39;).shim();</div>
<div class="line"> </div>
<div class="line">axios</div>
<div class="line">  .get(&#39;http://www.example.com/user&#39;)</div>
<div class="line">  .then((response) =&gt; {</div>
<div class="line">    console.log(response.data);</div>
<div class="line">    return response;</div>
<div class="line">  })</div>
<div class="line">  .finally(() =&gt; {</div>
<div class="line">    console.log(&#39;this will always be called&#39;);</div>
<div class="line">  });</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md63"></a>
Inflate/Deflate</h2>
<div class="fragment"><div class="line">$ npm install axios pako --save</div>
</div><!-- fragment --><div class="fragment"><div class="line">// client.js</div>
<div class="line">const axios = require(&#39;axios&#39;);</div>
<div class="line">const pako = require(&#39;pako&#39;);</div>
<div class="line"> </div>
<div class="line">const user = {</div>
<div class="line">  firstName: &#39;Fred&#39;,</div>
<div class="line">  lastName: &#39;Flintstone&#39;</div>
<div class="line">};</div>
<div class="line"> </div>
<div class="line">const data = pako.deflate(JSON.stringify(user), { to: &#39;string&#39; });</div>
<div class="line"> </div>
<div class="line">axios</div>
<div class="line">  .post(&#39;http://127.0.0.1:3333/user&#39;, data)</div>
<div class="line">  .then((response) =&gt; {</div>
<div class="line">    response.data = JSON.parse(pako.inflate(response.data, { to: &#39;string&#39; }));</div>
<div class="line">    console.log(response.data);</div>
<div class="line">    return response;</div>
<div class="line">  });</div>
</div><!-- fragment --><div class="fragment"><div class="line">// server.js</div>
<div class="line">const pako = require(&#39;pako&#39;);</div>
<div class="line">const http = require(&#39;http&#39;);</div>
<div class="line">const url = require(&#39;url&#39;);</div>
<div class="line"> </div>
<div class="line">const server = http.createServer((req, res) =&gt; {</div>
<div class="line">  req.setEncoding(&#39;utf8&#39;);</div>
<div class="line"> </div>
<div class="line">  const parsed = url.parse(req.url, true);</div>
<div class="line">  const pathname = parsed.pathname;</div>
<div class="line"> </div>
<div class="line">  if (pathname === &#39;/user&#39;) {</div>
<div class="line">    let data = &#39;&#39;;</div>
<div class="line">    req.on(&#39;data&#39;, (chunk) =&gt; {</div>
<div class="line">      data += chunk;</div>
<div class="line">    });</div>
<div class="line"> </div>
<div class="line">    req.on(&#39;end&#39;, () =&gt; {</div>
<div class="line">      const user = JSON.parse(pako.inflate(data, { to: &#39;string&#39; }));</div>
<div class="line">      console.log(user);</div>
<div class="line"> </div>
<div class="line">      res.writeHead(200, {</div>
<div class="line">        &#39;Content-Type&#39;: &#39;application/json&#39;</div>
<div class="line">      });</div>
<div class="line">      res.end(pako.deflate(JSON.stringify({result: &#39;success&#39;}), { to: &#39;string&#39; }));</div>
<div class="line">    });</div>
<div class="line">  } else {</div>
<div class="line">    res.writeHead(404);</div>
<div class="line">    res.end(pako.deflate(JSON.stringify({result: &#39;error&#39;}), { to: &#39;string&#39; }));</div>
<div class="line">  }</div>
<div class="line">});</div>
<div class="line"> </div>
<div class="line">server.listen(3333);</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md64"></a>
JSONP</h2>
<div class="fragment"><div class="line">$ npm install jsonp --save</div>
</div><!-- fragment --><div class="fragment"><div class="line">const jsonp = require(&#39;jsonp&#39;);</div>
<div class="line"> </div>
<div class="line">jsonp(&#39;http://www.example.com/foo&#39;, null, (err, data) =&gt; {</div>
<div class="line">  if (err) {</div>
<div class="line">    console.error(err.message);</div>
<div class="line">  } else {</div>
<div class="line">    console.log(data);</div>
<div class="line">  }</div>
<div class="line">});</div>
</div><!-- fragment --> </div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>
